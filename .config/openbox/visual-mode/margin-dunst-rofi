#!/usr/bin/env bash
LC_ALL=C LANG=C; . "${HOME}/.owl4ce_var"; OB_MARGIN="10"

echo "$CHK_ORT" > "${VISMOD_ROFI_FILE}.${STATE_EXT:-joy}"

case ${1} in
    v_left)   sed -si 's_geometry = ".*"_geometry = "350x6-19+52"_' "${DUNST_DIR}/dunstrc"-{mech,eyc}
              
              sed -e 's_x-offset:.*;_x-offset: -1.4%;_' -e 's_location:.*_location: east;_' \
                  -e 's_anchor:.*;_anchor: east;_' -si "$ROFI_SIDEBAR_DIR"/*-vertical.rasi
              
              sed -e "s_<left>.*</left>_<left>$((45+${OB_MARGIN}))</left>_" \
                  -e "s_<bottom>.*</bottom>_<bottom>${OB_MARGIN}</bottom>_" \
                  -e "s_<right>.*</right>_<right>${OB_MARGIN}</right>_" \
                  -e "s_<top>.*</top>_<top>${OB_MARGIN}</top>_" -i "$OB_CONFIG"
    ;;
    v_right)  sed -si 's_geometry = ".*"_geometry = "350x6+19+52"_' "${DUNST_DIR}/dunstrc"-{mech,eyc}
              
              sed -e 's_x-offset:.*;_x-offset: 1.4%;_' -e 's_location:.*_location: west;_' \
                  -e 's_anchor:.*;_anchor: west;_' -si "$ROFI_SIDEBAR_DIR"/*-vertical.rasi
              
              sed -e "s_<right>.*</right>_<right>$((45+${OB_MARGIN}))</right>_" \
                  -e "s_<bottom>.*</bottom>_<bottom>${OB_MARGIN}</bottom>_" \
                  -e "s_<left>.*</left>_<left>${OB_MARGIN}</left>_" \
                  -e "s_<top>.*</top>_<top>${OB_MARGIN}</top>_" -i "$OB_CONFIG"
    ;;
    h_top)    sed -si 's_geometry = ".*"_geometry = "350x6+19+65"_' "${DUNST_DIR}/dunstrc"-{mech,eyc}
              
              sed -e 's_y-offset:.*;_y-offset: -3%;_' -e 's_location:.*_location: south;_' \
                  -e 's_anchor:.*;_anchor: south;_' -si "$ROFI_SIDEBAR_DIR"/*-horizontal.rasi
              
              sed -e "s_<bottom>.*</bottom>_<bottom>${OB_MARGIN}</bottom>_" \
                  -e "s_<top>.*</top>_<top>$((45+${OB_MARGIN}))</top>_" \
                  -e "s_<right>.*</right>_<right>${OB_MARGIN}</right>_" \
                  -e "s_<left>.*</left>_<left>${OB_MARGIN}</left>_" -i "$OB_CONFIG"
    ;;
    h_bottom) sed -si 's_geometry = ".*"_geometry = "350x6-19+52"_' "${DUNST_DIR}/dunstrc"-{mech,eyc}
              
              sed -e 's_y-offset:.*;_y-offset: 6.9%;_' -e 's_location:.*_location: north;_' \
                  -e 's_anchor:.*;_anchor: north;_' -si "$ROFI_SIDEBAR_DIR"/*-horizontal.rasi
              
              sed -e "s_<bottom>.*</bottom>_<bottom>$((45+${OB_MARGIN}))</bottom>_" \
                  -e "s_<right>.*</right>_<right>${OB_MARGIN}</right>_" \
                  -e "s_<left>.*</left>_<left>${OB_MARGIN}</left>_" \
                  -e "s_<top>.*</top>_<top>${OB_MARGIN}</top>_" -i "$OB_CONFIG"
    ;;
    minmod)   sed -e "s_<bottom>.*</bottom>_<bottom>${OB_MARGIN}</bottom>_" \
                  -e "s_<top>.*</top>_<top>$((30+${OB_MARGIN}))</top>_" \
                  -e "s_<right>.*</right>_<right>${OB_MARGIN}</right>_" \
                  -e "s_<left>.*</left>_<left>${OB_MARGIN}</left>_" -i "$OB_CONFIG"
    ;;
esac

exit $?
